import{r as u,e as v,k as a,w as f,m as r,v as d,l as c,u as g,h as w}from"./vendor-wTwM5GbD.js";import{u as b}from"./index-CNyJ74Tt.js";import{a as i}from"./mdui-B9C5XAKh.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"auth-container"},x={class:"auth-card",variant:"elevated"},y=["disabled"],k=["disabled"],V=["disabled"],q=["disabled"],P=["loading"],R={class:"auth-footer"},S={__name:"Register",setup(U){const n=g(),p=b(),s=u({username:"",email:"",password:"",confirmPassword:""}),t=u(!1);async function m(){if(s.value.password.length<8){i({message:"密码长度至少为8位",placement:"top"});return}if(s.value.password!==s.value.confirmPassword){i({message:"两次输入的密码不一致",placement:"top"});return}t.value=!0;try{await p.register(s.value.username,s.value.password,s.value.email),i({message:"注册成功！请登录",icon:"done",placement:"top"}),n.push("/login")}catch(o){i({message:o.error||"注册失败，请重试",placement:"top"})}finally{t.value=!1}}return(o,e)=>(w(),v("div",_,[a("mdui-card",x,[e[7]||(e[7]=a("div",{class:"auth-header"},[a("h1",null,"注册"),a("p",null,"创建你的 ZiXiao Git Server 账号")],-1)),a("form",{onSubmit:f(m,["prevent"])},[r(a("mdui-text-field",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l),label:"用户名",placeholder:"请输入用户名",required:"",disabled:t.value},null,8,y),[[d,s.value.username]]),r(a("mdui-text-field",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.email=l),type:"email",label:"邮箱",placeholder:"请输入邮箱",required:"",disabled:t.value},null,8,k),[[d,s.value.email]]),r(a("mdui-text-field",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.password=l),type:"password",label:"密码",placeholder:"请输入密码（至少8位）",required:"",disabled:t.value,"toggle-password":""},null,8,V),[[d,s.value.password]]),r(a("mdui-text-field",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.confirmPassword=l),type:"password",label:"确认密码",placeholder:"请再次输入密码",required:"",disabled:t.value,"toggle-password":""},null,8,q),[[d,s.value.confirmPassword]]),a("mdui-button",{type:"submit",variant:"filled","full-width":"",loading:t.value,style:{"margin-top":"24px"}}," 注册 ",8,P)],32),a("div",R,[a("p",null,[e[6]||(e[6]=c("已有账号？ ",-1)),a("a",{onClick:e[4]||(e[4]=l=>o.$router.push("/login"))},"立即登录")]),a("p",null,[a("a",{onClick:e[5]||(e[5]=l=>o.$router.push("/"))},"返回首页")])])])]))}},M=h(S,[["__scopeId","data-v-5cba4d49"]]);export{M as default};
