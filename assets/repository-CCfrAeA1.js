import{d as R,r as i}from"./vendor-wTwM5GbD.js";import{r as s}from"./index-CNyJ74Tt.js";const g=R("repository",()=>{const l=i([]),o=i(null),a=i(!1),r=i(null);async function v(){a.value=!0,r.value=null;try{const e=await s.getRepositories();return l.value=e,e}catch(e){throw r.value=e,e}finally{a.value=!1}}async function f(e){a.value=!0,r.value=null;try{const t=await s.getRepository(e);return o.value=t,t}catch(t){throw r.value=t,t}finally{a.value=!1}}async function y(e){a.value=!0,r.value=null;try{const t=await s.createRepository(e);return l.value.push(t),t}catch(t){throw r.value=t,t}finally{a.value=!1}}async function p(e,t){var u;a.value=!0,r.value=null;try{const n=await s.updateRepository(e,t),c=l.value.findIndex(h=>h.id===e);return c!==-1&&(l.value[c]=n),((u=o.value)==null?void 0:u.id)===e&&(o.value=n),n}catch(n){throw r.value=n,n}finally{a.value=!1}}async function d(e){var t;a.value=!0,r.value=null;try{await s.deleteRepository(e),l.value=l.value.filter(u=>u.id!==e),((t=o.value)==null?void 0:t.id)===e&&(o.value=null)}catch(u){throw r.value=u,u}finally{a.value=!1}}return{repositories:l,currentRepository:o,loading:a,error:r,fetchRepositories:v,fetchRepository:f,createRepository:y,updateRepository:p,deleteRepository:d}});export{g as u};
